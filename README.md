# Необходимо разработать упрощенный сервис с регистрацией и авторизацией.

## Сервис должен иметь 3 апи-метода (REST):
1. /register -  входные параметры string email, string password. Нужно проверить, что пользователя с таким email еще нет в базе и email валидный. Также нужно добавить проверку надежности пароля - если пароль легко подобрать, - выкидывать ошибку weak_password. На выходе нужно возвращать int user_id, string password_check_status (good, perfect).
2. /authorize - входные параметры string email, string password. В ответе - string access_token JWT в котором будет лежать user_id.
3. /feed - идём в метод с access_token, возвращаем просто 200 код, если токен валиден, или выкидываем ошибку unauthorized, если нет.

Проект разместить в открытом git-репозитории и предоставить ссылку, обязателен Readme с инструкцией как все запустить. Будет большим плюсом, если проект упакован в Docker контейнер.

# Запуск проекта

## Запуск через Docker-контейнер.
Необходимо ввести в терминал из корня проекта - ```docker-compose up --build -d```
Будет развёрнуто 2 контейнера:
1. db - СУБД PostgreSQL
2. server - сам сервис 

## Запуск локально
### Конфигурация БД
Сервис использует Postgresql, для успешной работы сервиса подтребуется:
1. Создать бд VK_Authorization
2. Воспользоваться скриптом ```internal\postgresql\init.sql```
После использования скрипта:
    Будет создан и настроен пользователь auth_service
    Будет создана таблица USERS

### Запуск сервиса
1. Необходимо установить зависимости, для это из корня проекта надо выполнить команду - ```go mod download```
2. Скомпелировать выполняемый файл -  ```go build -o <название_выполняемого_файла> ./cmd/auth-server/main.go```
4. Установить переменные окружения ```CONFIG_PATH=./config/config.yml``` и ```KEY_JWT=testkey```
3. Запуск - ```./app```

# Проверка

Для удобной проверки была сгенирирована спецификация swagger (использовался подход code-first). Спецификация находится в директории docs. Также воспользоваться спецификацией можно по URI - /swagger/ (например: http://localhost:8080/swagger/)

# Конфигурация

Для конфигурации проекта надо изменить файл ./config/config.yml
Также по необходимости dockerfile и dockercompose

# Доступ к /feed

Для получения доступа к /feed, необходимо вставить полученный токен доступа в заголовок запроса:
```Authorization: Bearer <access_token>```